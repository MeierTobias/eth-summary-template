% colors
\usepackage{color,xcolor}
\definecolor{sectionColor}{HTML}{6404c9}%{15836c}  % 1c59c9
\definecolor{subSectionColor}{HTML}{1c59c9} % 568ae8
\definecolor{subSubSectionColor}{HTML}{568ae8} % 87a9e8
\definecolor{paragraphColor}{HTML}{87a9e8} % 87a9e8
\definecolor{subParagraphColor}{HTML}{ffffff} % 87a9e8
\definecolor{exampleColor}{HTML}{c3c2c5}
\definecolor{titleTextColorLight}{HTML}{ffffff}
\definecolor{titleTextColorDark}{HTML}{000000}

% multicol settings
\setlength{\premulticols}{1pt}
\setlength{\postmulticols}{1pt}
\setlength{\multicolsep}{1pt}
\setlength{\columnsep}{5pt}
\setlength{\columnseprule}{1pt}
\def\columnseprulecolor{\color{lightgray}}

% define header style
\usepackage[headsepline]{scrlayer-scrpage}
\pagestyle{scrheadings}
\ihead{\summaryTitle{} - \today}
\chead{\pagemark}
\ohead{\url{\repoURL}}
\setlength{\headsep}{5pt}

% hyperlinks have to be included last
\usepackage{hyperref}
\hypersetup{
  colorlinks,
  citecolor=blue,
  filecolor=black,
  linkcolor=black,
  urlcolor=black,
  pdftitle={\summaryTitle{}}
}

% set the size of a section
\usepackage{parskip}
\setlength{\parindent}{0pt}
\setlength{\parskip}{0pt}

% used for colored boxes
\usepackage[many]{tcolorbox}

% customize the headers
\usepackage[explicit]{titlesec}
\usepackage{titletoc}

% creates a custom title background 
\newcommand{\customtitlebackground}[4]{\begin{tcolorbox}[
      enhanced,
      boxrule=0pt,
      arc=0pt,
      outer arc=0pt,
      left=0pt,
      right=0pt,
      top=0pt,
      bottom=0pt,
      nobeforeafter,
      interior code={\fill[overlay,#1] (frame.north west) rectangle (frame.south east);},
    ]\textcolor{#2}{#3\hspace{0.5em}#4}
  \end{tcolorbox}}
  
% Update section title (same for all section levels)
% This creates a title with colored box at the background
% The default colors are specified at the top of this file
% The new \section command also accepts an optional color parameter to use a custom background color.
% \section[customColor]{Section name}
% More in detail:
% The middle part (\titleformat and \titlespacing) defines the layout. The \backgroundcolor command
% is used as a placeholder for later. The renewcommand at the bottom adds the functionality to
% accept an optional color parameter.
\newcommand\backgroundcolor{}
\titleformat{\section}
{\normalfont\bfseries\fontfamily{lmss}\selectfont}{}{0pt}
{\customtitlebackground{\backgroundcolor}{titleTextColorLight}{\thesection}{#1}}[{\startcontents[section]}]
\titlespacing{\section}{0pt}{1pt}{0pt}
% set background color as an optional parameter
\let\oldsection\section
\renewcommand\section[2][sectionColor]{\edef\backgroundcolor{#1}\oldsection{#2}}

% update subsection title
\titleformat{\subsection}
{\normalfont\bfseries\fontfamily{lmss}\selectfont}{}{0pt}
{\customtitlebackground{\backgroundcolor}{titleTextColorLight}{\thesubsection}{#1}}
\titlespacing{\subsection}{0pt}{1pt}{0pt}
% set background color as an optional parameter
\let\oldsubsection\subsection
\renewcommand\subsection[2][subSectionColor]{\edef\backgroundcolor{#1}\oldsubsection{#2}}

% update subsubsection title
\titleformat{\subsubsection}
{\normalfont\bfseries\fontfamily{lmss}\selectfont}{}{0pt}
{\customtitlebackground{\backgroundcolor}{titleTextColorLight}{\thesubsubsection}{#1}}
\titlespacing{\subsubsection}{0pt}{1pt}{0pt}
% set background color as an optional parameter
\let\oldsubsubsection\subsubsection
\renewcommand\subsubsection[2][subSubSectionColor]{\edef\backgroundcolor{#1}\oldsubsubsection{#2}}

% update paragraph title
\titleformat{\paragraph}
{\normalfont\bfseries\fontfamily{lmss}\selectfont}{}{0pt}
{\customtitlebackground{paragraphColor}{titleTextColorLight}{\theparagraph}{#1}}
\titlespacing{\paragraph}{0pt}{1pt}{0pt}
% set background color as an optional parameter
\let\oldparagraph\paragraph
\renewcommand\paragraph[2][paragraphColor]{\edef\backgroundcolor{#1}\oldparagraph{#2}}

% update subparagraph title
% \titleformat{\subparagraph}
% {\normalfont\bfseries\fontfamily{lmss}\selectfont}{}{0pt}
% {\customtitlebackground{subParagraphColor}{titleTextColorDark}{\thesubparagraph}{#1}}
% \titlespacing{\subparagraph}{0pt}{1pt}{0pt}
% % set background color as an optional parameter
% \let\oldsubparagraph\subparagraph
% \renewcommand\subparagraph[2][subParagraphColor]{\edef\backgroundcolor{#1}\oldsubparagraph{#2}}

\newcommand{\ptitle}[1]{{\normalfont\bfseries\fontfamily{lmss}\selectfont#1\newline}}

% Create a TOC for the current section
\newcommand{\createsectiontoc}{
  \printcontents[section]{p}{2}{}{}%
}
% Removes the page numbering from the sub- and subsub-section
\titlecontents{subsection}[0.2em]{}{\thecontentslabel\hspace{1em}}{}{}[]
\titlecontents{subsubsection}[2.6em]{}{\thecontentslabel\hspace{1em}}{}{}[]
\titlecontents{paragraph}[5.7em]{}{\thecontentslabel\hspace{1em}}{}{}[]

% Example section environment
\newenvironment{examplesection}[1][]
{
  \ifnum\value{section}=0
    \PackageError{examplesection}{Can't place an examplesection here}{Create a section first.}
  \else
    \ifnum\value{subsection}=0
      \subsection[exampleColor]{#1}
    \else
      \ifnum\value{subsubsection}=0
        \subsubsection[exampleColor]{#1}
      \else
        \ifnum\value{paragraph}=0
          \paragraph[exampleColor]{#1}
        \else
          \subparagraph[exampleColor]{#1}
        \fi
      \fi
    \fi
  \fi

  \color{blue}
}
{
}

% exclude examples if specified
\if 0\includeexamples
  \excludecomment{examplesection}
\fi